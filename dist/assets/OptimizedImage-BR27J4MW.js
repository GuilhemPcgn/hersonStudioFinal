import{r as a,j as g}from"./index-BcOKS4Mg.js";const w=(d={})=>{const{threshold:i=.1,rootMargin:c="50px",fallbackDelay:l=300}=d,[u,s]=a.useState(!1),[o,f]=a.useState(!1),n=a.useRef(null);return a.useEffect(()=>{const e=n.current;if(!e)return;if(e.complete&&e.naturalHeight!==0){s(!0);return}const r=()=>{f(!0),e.dataset.src&&(e.src=e.dataset.src,e.removeAttribute("data-src"))};if("IntersectionObserver"in window){const t=new IntersectionObserver(v=>{v.forEach(m=>{m.isIntersecting&&(r(),t.unobserve(m.target))})},{threshold:i,rootMargin:c});return t.observe(e),()=>{t.disconnect()}}else{const t=()=>{window.requestIdleCallback?window.requestIdleCallback(r):setTimeout(r,l)};if(document.readyState==="complete")t();else return window.addEventListener("load",t),()=>window.removeEventListener("load",t)}},[i,c,l]),a.useEffect(()=>{const e=n.current;if(!e)return;const r=()=>s(!0),t=()=>s(!1);return e.addEventListener("load",r),e.addEventListener("error",t),()=>{e.removeEventListener("load",r),e.removeEventListener("error",t)}},[o]),{imgRef:n,isLoaded:u,isInView:o,shouldLoad:o||u}},I=({src:d,alt:i,width:c,height:l,className:u="",priority:s=!1,lazy:o=!0,sizes:f="100vw",style:n={}})=>{const{imgRef:e,isLoaded:r}=w({threshold:.1,rootMargin:"50px"}),t=!o||s;return g.jsx("img",{ref:e,src:t?d:void 0,"data-src":t?void 0:d,alt:i,width:c,height:l,loading:s?"eager":"lazy",decoding:s?"sync":"async",className:u,sizes:f,style:{backgroundColor:"#f3f4f6",transition:"opacity 0.3s ease",opacity:r?1:.7,...n}})};export{I as O};
